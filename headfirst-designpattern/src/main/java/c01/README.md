### OO基础
抽象：

封装：

多态：

继承：

### OO 原则
####开闭原则：

找出应用中可能需要变化之处，把它们独立出来，不要和那些不
需要变化的代码混在一起。

换句话说，如果每次新的需求一来，都会使某方面的代码发生变化，那么你
就可以确定，这部分的代码需要被抽出来，和其他稳定的代码有所区分。

把会变化的部分取出并封装起来，以便以后可以轻易地改动或扩充部分，而
不影响不要变化的其他部分。

这样的概念很简单，几乎是每个设计模式背后的精神所在。所有的模式都提
供了一套方法让"系统中的某部分改变不会影响其他部分"。

把会变化的部分取出并"封装"起来，好让其他部分不会受到影响。代码变化
引起的不经意后果变少，系统变得更有弹性。

##### 疑问
1. 我是不是一定要先把系统做出来，再看看有哪些地方需要变化，然后才回头
去把这些地方分离?
不尽然，通常在你设计系统时，预先考虑到有哪些地方未来可能需要变化，
于是提前在代码中加入这些弹性。你会发现，原则与模式可以应用在软件
开发生命周期的任何阶段。

2. Duck是不是也该设计成一个接口？
在本例中，这么做并不恰当。如你所见，我们已经让一切都整合妥当，而且
让Duck成为一个具体类，这样可以让子类具有Duck共同的属性和方法。我们
已经从Duck的继承结构中删除了变化的部分。原先的问题都已经解决了，所
以不需要把Duck设计成接口。

3. 用一个类代表一个行为，感觉似乎有点奇怪。类不是应该代表某种"东西"吗?
类不是应该同时具备状态"与"行为吗?
在OO系统中，是的，类代表的东西一般都是既有状态又有方法。只是在本例
中，"东西"是个行为，但是即使是行为，也仍然可以有状态和方法。例如，
飞行的行为可以具有实例变量，记录飞行的属性(每秒翅膀拍动几下，最大
高度和速度等)。

#### 针对接口编程，而不是针对实现编程(针对超类型编程)。

关键就在于多态。利用多态，程序可以针对超类型编程，执行时会根据实际
执行状况执行真正的行为，不会被绑死在超类型的行为上。

"针对超类型编程"这句话，可以更明确地说成"变量"的声明类型应该是超类
型，通常是一个抽象类或者是一个接口，如此，只要是具体实现此超类型的
类所产生的对象，都可以指定给这个变量。这也意味着，声明类时不用理会
以后执行时的真正对象类型。

```java
public class Animal{}
public class Dog extends Animal{}
public class Cat extends Animal{}
//针对实现编程
Dog d = new Dog();

//针对超类型编程
Animal a = new Dog();

//更棒的是，子类实例化的动作不再需要在代码中硬编码，而是"在运行时才
//指定具体实现的对象"
a = getAnimal();
```

#### 多用组合，少用继承。

使用组合建立系统具有很大的弹性，不仅可将算法族封装成类，更可以"在运
行时动态地改变行为"，只要组合的行为对象符合正确的接口标准即可。

组合用在"许多"设计模式中，会看到它的诸多优点和缺点。

我们总是需要花许多时间在系统的维护和变化上，比原先开发花的时间更多。
我们应该致力于提高可维护和可扩展上的复用程度。

### OO 模式
策略模式：定义算法簇，分别分装起来，让它们之间可以互相替换，此模式
让算法的变化独立于使用算法的客户。

### 共享词汇的魅力
1. 当你使用模式名称和其他开发人员或者开发团队沟通时，你们之间交流
的不只是模式名称。而是一整套模式背后所象征的质量、特性、约束。
2. 当你使用模式描述的时候，其他开发人员便很容易地知道你对设计的想法。
3. 使用模式谈论软件系统，可以让你保持在设计层次，不会被压低到对象与
类这种琐碎的事情上。
4. 对于设计模式有深入了解的团队，彼此之间对于设计的看法不容易产生误解。
5. 共享词汇能帮组初级开发人员快速成长。

### 如何使用模式
1. 设计模式比库的等级更高，设计模式告诉我们如何组织类和对象以解决某
种问题。而且采纳这些设计并使它们适合我们特定的应用，是我们责无旁贷的
事情。

2. 库和框架提供了某些特定的实现，让我们的代码轻易地引用，但是这并不
算是设计模式。有些时候，库和框架本身会用到设计模式，这样很好，因为一
旦你理解了设计模式，会更容易了解这些API是围绕着设计模式构造的。

3. 我们挑选库和框架，把它们放进合适的地方。但是它们无法帮组我们将应
用组织成容易了解，容易维护，具有弹性的架构，所以需要设计模式。

4. 设计模式不会直接进入你的代码中，而是先进入你的"大脑"中。一旦你先
在脑海中装入了许多关于模式的知识，就能够开始在新设计中采用它们，并当
你的旧代码变得如同搅和成一团没有弹性的意大利面一样时，可用它们重做
旧代码。

### 总结

不管你在何处工作，构建些什么，用何种编程语言，在软件开发上，一直伴随
你的那个不变真理是改变。不管当初软件设计得多好，一段时间之后，总是需
要成长与改变，否则软件就会"死亡"。

很多时候，在设计时有两难的情况，这时候我们必须回归到OO原则，以方便判
断取舍。可以这么说，OO原则是我们的目标，而设计模式是我们的做法。

使用模式最好的方式是："把模式装进脑子里，然后在你的设计和已有的应用
中，寻找何处可以使用它们。"以往是代码复用，现在是经验复用。

记住，知道抽象、继承、多态这些概念，并不会马上让你变成好的面向对象设计
者。设计大师关心的是建立弹性的设计，可以维护，可以应付变化。

要构造有这些特征的OO系统，事实证明只有通过不断地艰苦实践，才能成功。
在一定程度上，如果知道了模式，就可以减少许多体力劳动，直接采用可行
的模式。不过设计是一门艺术，总是有许多可取舍的地方。但是如果你能
采用这些经过深思熟虑，且经过时间考验的设计模式，你就领先别人了。

有一些面向对象原则，适用于所有的模式。当你无法找到适当的模式解决问题
时，采用这些原则可以帮助你。建立可维护的OO系统，要诀就在于随时想到系
统以后可能需要的变化以及应付变化的原则。

> 时时刻刻要思考着：模式如何依赖基础与原则。

### 要点

* 知道OO基础，并不足以让你设计出良好的OO系统。
* 良好的OO设计必须具备可复用，可扩充，可维护三个特性。
* 模式可以让我们建造出具有良好OO设计质量的系统。
* 模式被认为是历经验证的OO设计经验。
* 模式不是代码，而是针对设计问题的通用解决方案，你可把它们应用到特定的应用中。
* 模式不是被发明，而是被发现。
* 大多数的模式和原则，都着眼于软件变化的主题。
* 大多数的模式都允许系统局部改变独立于其他部分。
* 我们常把系统中会变化的部分抽象出来封装。
* 模式让开发人员之间有共享的语言，能够最大化沟通的价值。