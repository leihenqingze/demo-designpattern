“决赛是一道应用题，希望五位选手根据你们的经验，来说明如果你参与其中，将会发挥什么样的作用，具体如何做。评委将根据各位的临场表现打分，最终评出冠亚季军。”GOF说道，“各位请听题。”

“题目是说有一家以软件开发和服务为主的创业型的公司创业初期初见成效，公司有了发展，员工数量大量增加，于是就考虑自主开发一套薪资管理系统来对公司的员工薪资进行管理，做得好也将作为产品对外销售。公司的员工按照薪资来分类大致可分为普通员工，他们按照月薪制发放，每月有工资和奖金；市场和销售人员，按照每月底薪加提成的方式发放；中高级管理人员，按照年薪加分红的方式发放；兼职人员和临时工，按照小时计费发放。系统要求界面不花哨，但要方便易用，如要有菜单、工具栏和状态栏等要素。产品初步打算用SQL Server作为数据库，但不排除未来成为产品后将可以应用于Oracle、MySQL等数据库来做数据持久化。薪资可以提供多种查询和统计的功能，报表能生成各种复杂的统计图。由于系统是自主研发的产品，所以统计图生成如若时间充裕则自行开发，否则就购买第三方的组件。”GOF念完题目后，接着说，“好了，现在请选手们准备一下，说出你们对这个系统设计的建议。”

“首先有请外观小姐发言。”

“我觉得这是一套典型的企业办公软件，所以在设计上我建议用三层架构比较好，也就是表示层、业务逻辑层和数据访问层。由于公司对业务有明确的需求，但对界面却有模糊性，‘不花哨’和‘方便易用’实在是仁者见仁，智者见智。所以我的建议是在业务逻辑与表示层之间，增加一业务外观层，这样就让两层明显地隔离，表示层的任何变化，比如是用客户端软件还是用浏览器方式表示都不会影响到业务与数据的设计。”外观小姐侃侃而谈。

“非常棒的回答，下面有请观察者小姐发言。”

“需求中提到‘要有菜单、工具栏和状态栏等要素’，其实不管是C/S架构还是B/S架构，每个按钮或链接的点击都需要触发一系列的事件。而所有的事件机制其实都是观察者模式的一种应用，即当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新，比如状态栏就是一个根据事件的不同时刻需要更新的控件。因为我觉得整个表示层，采用事件驱动的技术是可以很好地完成需求的。我说完了。”

“OK，下面有请适配器小姐回答。”

“本来我以为这个系统没我什么事，但是最后的需求，让我感觉我还是能发挥大作用。需求说‘统计图生成如若时间充裕则自行开发，否则就购买第三方的组件’，这里的意思其实就是说，统计图表的生成是自己开发还是购买组件是有变数的。既然这里存在可能的变化，那很显然要考虑将其封装，根据依赖倒转原则，我们让业务模块依赖一个抽象的生成图接口，而非具体的第三方组件或自行实现代码将有利于我们的随机应变。至于第三方组件的接口不统一的问题，完全可以利用适配器模式来处理，达到适应变化的需求。谢谢！”

“哈，看来题目难不倒各位模式的小姐。下面有请策略小姐发言。”

“轮到我了？好的，我是这么想的。公司有多种薪资发放规则，但不管用哪种发放规则，只不过是计算的不同，最终都将是数据的存储与展示，因此我们不希望发放规则的变化会影响系统的数据新增修改、数据统计查询等具体的业务逻辑。应用策略模式，可以很好的把薪资发放规则一个个封装起来，并且使它们可相互替换，这样哪怕再增加多种发放规则，或者修改原有的规则，都不会影响其他业务的实现。回答完毕。”

“Very Very Good！策略小姐的回答，非常精彩。下面有请最后一位，工厂方法小姐发言。”

“只要是在做面向对象的开发，创建对象的工作不可避免。创建对象时，负责创建的实体通常需要了解要创建的是哪个具体的对象，以及何时创建这个而非那个对象的规则。而我们如果希望遵循开放-封闭原则、依赖倒转原则和里氏代换原则，那使用对象时，就不应该知道所用的是哪一个特选的对象。此时就需要‘对象管理者’工厂来负责此事[DPE]。比如需求中说到系统做成产品后可以用多种数据库来做持久化。如果我们创建对象时指明了是用SQL Server，那么就会面临着要用Oracle的时候的尴尬问题，因为这里不能适应变化。解决办法是我们可以通过抽象工厂模式、反射技术等手段来让业务逻辑与数据访问之间减少耦合。当然，如果系统比较复杂，也可以使用一种ORM工具来将业务对象与关系数据库进行映射。同样的道理，刚才提到的应用策略模式解决薪资发放规则，用适配器模式解决第三方组件适配等问题，在对象创建时，都可以通过工厂的手段来避免指明具体对象，减少耦合性。另外，在创建对象时，使用抽象工厂、原型、建造者的设计比使用工厂方法要更灵活，但它们也更加复杂，通常，设计是以使用工厂方法开始，当设计者发现需要更大的灵活性时，设计便会向其他创建型模式演化[DP]。总之，在面向对象开发过程中，为了避免耦合，都多多少少会应用工厂方法来帮助管理创建对象的工作。工厂方法的实现并不能减少工作量，但是它能够在必须处理新情况时，避免使已经很复杂的代码更加复杂[DPE]。工厂方法会继续努力，为大家做好优质的服务，谢谢大家。”

其实说到底，面向对象设计模式体现的就是抽象的思想，类是什么，类是对
对象的抽象，抽象类呢，其实就是对类的抽象，那接口呢，说白了就是对行
为的抽象。不管是什么，其实都是在不同层次、不同角度进行抽象的结果，
它们的共性就是抽象。